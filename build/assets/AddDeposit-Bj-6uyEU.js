import{r as d,j as e}from"./app-lUInwgRy.js";import{D as F}from"./DashboardLayout-Drlw7XGl.js";import{u as V}from"./translations-DtJK5JUl.js";import{F as C,a as g,b as N,c as _}from"./FormInput-DB9DkBcD.js";import{u as T}from"./form-DTWdmFFU.js";import{z as h}from"./index-dIKOytT1.js";import{S as I,a as A,b as E,c as R,d as Z}from"./select-1wS69xo6.js";import{C as k,b as q,c as z,a as B}from"./card-DFZvYdxo.js";import{I as H}from"./input-C7csDmVJ.js";import{b as M,B as w}from"./button-DzDbuX-O.js";import{f as n}from"./money-CnQH2c1S.js";import{D as P,a as L,b as W,c as $,d as G,e as J}from"./dialog-BWYTjd7C.js";/* empty css            */import"./tooltip-T2okiHGF.js";import"./utils-Cx_fVcGQ.js";import"./index-DcmApiEi.js";import"./createLucideIcon-BKiTtyiR.js";import"./index-DeDYDX0v.js";import"./index-x9bG2h8o.js";import"./index-DHkfiFuj.js";import"./index-CWdjyrzl.js";import"./index-CbDD-pNU.js";import"./index-DGf6IaJB.js";import"./index-DNiOst2b.js";import"./chevron-right-DaGFS2bX.js";import"./avatar-IUyYeUaq.js";import"./consts-CgVw4MgC.js";import"./instagram-DDsg64cs.js";import"./mail-DP18s0oF.js";import"./label-BGTeFzqh.js";import"./index-BEk9yI-S.js";import"./index-B_8yjaaa.js";import"./x-D5Njf_z9.js";const K=h.object({gateway:h.string(),amount:h.number()}),D={amount:0,gateway:""},c={gateway:{description:"Sélectionnez la passerelle de paiement.",placeholder:"Passerelle de paiement"},amount:{description:"Montant du dépôt.",placeholder:"Montant du dépôt"}},O=u=>{const{handleSubmit:l,rhfForm:o,inertiaForm:t}=T({schema:K,defaultValues:u?{...D,amount:Number(u)}:D});function p(m,s){s.post("/client/deposit/insert")}return{onSubmit:p,handleSubmit:l,rhfForm:o,inertiaForm:t,dataSetter:m=>{t.setData(m)}}},_e=({pageTitle:u,gatewayCurrency:l,price:o})=>{const{t}=V(),{handleSubmit:p,inertiaForm:v,onSubmit:m,rhfForm:s,dataSetter:f}=O(o);console.log(l);const[i,S]=d.useState(l[0]),[x,j]=d.useState(0),b=d.useRef(null);return d.useEffect(()=>{o&&j(Number(o))},[]),e.jsx(F,{title:t("add_deposit"),children:e.jsxs("div",{className:"w-full h-full py-8",children:[e.jsx("div",{className:"w-full mb-12",dir:"ltr",children:e.jsx("h1",{className:"mb-4 text-4xl font-semibold ",children:t("deposit")})}),e.jsxs(k,{className:"my-12",children:[e.jsx(q,{children:e.jsx(z,{children:t("add_deposit")})}),e.jsx(B,{children:e.jsx(C,{...s,children:e.jsxs("form",{onSubmit:p(m),className:"flex flex-col w-full space-y-4",ref:b,children:[e.jsx(g,{name:"gateway",control:s.control,render:({field:r})=>e.jsx(N,{label:c.gateway.description,className:"w-full mb-6",content:e.jsxs(I,{onValueChange:a=>{r.onChange(a),f(s.getValues()),S(l.find(y=>y.method_code===Number(a)))},defaultValue:"",children:[e.jsx(_,{children:e.jsx(A,{children:e.jsx(E,{placeholder:c.gateway.placeholder})})}),e.jsx(R,{children:l.map(a=>e.jsx(Z,{value:""+a.method_code,children:a.name},a.name))})]}),children:e.jsx(e.Fragment,{children:"No Data"})})}),e.jsxs("div",{className:"flex items-center w-full gap-1",children:[e.jsx(g,{name:"amount",control:s.control,render:({field:r})=>e.jsx(N,{label:c.amount.description,className:"w-full mb-6",children:e.jsx(H,{type:"number",...r,disabled:!s.getValues().gateway||!Number.isNaN(Number(o)),onChange:a=>{r.onChange(Number(a.target.value)),f(s.getValues()),j(Number(a.target.value))},required:!0,placeholder:""+c.amount.placeholder})})}),e.jsx("div",{className:`mt-2 ${M({variant:"outline"})} hover:bg-white min-w-[100px] text-primary `,children:"DZD"})]}),x&&i?e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsx("div",{className:"w-full mb-6",children:e.jsxs("div",{className:"flex flex-row items-center justify-between w-full ",children:[e.jsxs("div",{className:"text-base",children:[t("amount")," ",t("range")]}),e.jsxs("div",{className:"text-sm",children:[n(Number(i.min_amount)),"-",n(Number(i.max_amount))]})]})}),e.jsx("div",{className:"w-full mb-6",children:e.jsxs("div",{className:"flex flex-row items-center justify-between w-full ",children:[e.jsx("div",{className:"text-base",children:t("charge")}),e.jsx("div",{className:"text-sm",children:n(Number(i.fixed_charge))})]})}),e.jsx("div",{className:"w-full mb-6",children:e.jsxs("div",{className:"flex flex-row items-center justify-between w-full ",children:[e.jsxs("div",{className:"text-base",children:[t("total")," ",t("amount")]}),e.jsx("div",{className:"text-sm",children:n(Number(x+Number(i.fixed_charge)))})]})})]}):e.jsx(e.Fragment,{}),e.jsxs(P,{children:[e.jsx(L,{className:"w-full",children:e.jsx(w,{type:"button",className:"w-full",disabled:!s.getValues().amount||!s.getValues().gateway,children:t("submit")})}),e.jsxs(W,{children:[e.jsxs($,{children:[e.jsxs(G,{children:[t("deposit_confirmation")," ",n(x)," DZD"]}),e.jsx(J,{children:t("follow_payment_instructions")})]}),e.jsx(w,{type:"button",className:"",disabled:!s.getValues().amount||!s.getValues().gateway,onClick:()=>{const r=b.current;r&&r.requestSubmit()},children:t("confirm")})]})]})]})})})]})]})})};export{_e as default};
