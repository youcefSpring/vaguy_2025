import{r as a,c as b,b as A}from"./app-lUInwgRy.js";import{a as h}from"./utils-Cx_fVcGQ.js";import{b as N,a as p}from"./index-DeDYDX0v.js";function P(e,n){return a.useReducer((c,t)=>{const o=n[c][t];return o??c},e)}const S=e=>{const{present:n,children:c}=e,t=O(n),o=typeof c=="function"?c({present:t.isPresent}):a.Children.only(c),s=h(t.ref,o.ref);return typeof c=="function"||t.isPresent?a.cloneElement(o,{ref:s}):null};S.displayName="Presence";function O(e){const[n,c]=a.useState(),t=a.useRef({}),o=a.useRef(e),s=a.useRef("none"),l=e?"mounted":"unmounted",[f,u]=P(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const r=$(t.current);s.current=f==="mounted"?r:"none"},[f]),N(()=>{const r=t.current,d=o.current;if(d!==e){const v=s.current,m=$(r);e?u("MOUNT"):m==="none"||(r==null?void 0:r.display)==="none"?u("UNMOUNT"):u(d&&v!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),N(()=>{if(n){const r=i=>{const m=$(t.current).includes(i.animationName);i.target===n&&m&&b.flushSync(()=>u("ANIMATION_END"))},d=i=>{i.target===n&&(s.current=$(t.current))};return n.addEventListener("animationstart",d),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{n.removeEventListener("animationstart",d),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:a.useCallback(r=>{r&&(t.current=getComputedStyle(r)),c(r)},[])}}function $(e){return(e==null?void 0:e.animationName)||"none"}function R(e,n,{checkForDefaultPrevented:c=!0}={}){return function(o){if(e==null||e(o),c===!1||!o.defaultPrevented)return n==null?void 0:n(o)}}const M=A.useId||(()=>{});let T=0;function I(e){const[n,c]=a.useState(M());return N(()=>{e||c(t=>t??String(T++))},[e]),e||(n?`radix-${n}`:"")}function y({prop:e,defaultProp:n,onChange:c=()=>{}}){const[t,o]=U({defaultProp:n,onChange:c}),s=e!==void 0,l=s?e:t,f=p(c),u=a.useCallback(r=>{if(s){const i=typeof r=="function"?r(e):r;i!==e&&f(i)}else o(r)},[s,e,o,f]);return[l,u]}function U({defaultProp:e,onChange:n}){const c=a.useState(e),[t]=c,o=a.useRef(t),s=p(n);return a.useEffect(()=>{o.current!==t&&(s(t),o.current=t)},[t,o,s]),c}export{S as $,R as a,y as b,I as c};
